<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover" />
  <title>Î∂ÄÏÇ∞ ÎßõÏßë BEST 100</title>

  <!-- Ïπ¥Ïπ¥Ïò§Îßµ SDK -->
  <script src="https://dapi.kakao.com/v2/maps/sdk.js?appkey=723a28831bc100497d089cbc3a64e24f"></script>

  <style>
    * { box-sizing: border-box; margin: 0; padding: 0; font-family: -apple-system, BlinkMacSystemFont, "Apple SD Gothic Neo", sans-serif; }
    body { background: #f5f5f5; }

    header {
      padding: 14px;
      background: #000;
      color: #fff;
      text-align: center;
      font-size: 18px;
      font-weight: 700;
    }

    /* Î¶¨Ïä§Ìä∏ */
    .list {
      max-height: 40vh;
      overflow-y: auto;
      background: #fff;
      border-bottom: 1px solid #ddd;
    }

    .item {
      display: flex;
      gap: 12px;
      padding: 14px;
      border-bottom: 1px solid #eee;
      cursor: pointer;
      align-items: center;
    }

    .item.active {
      background: #fff6d5;
      border-left: 4px solid #d4af37;
    }

    .rank {
      width: 42px;
      text-align: center;
      font-weight: 800;
      font-size: 16px;
    }

    .rank.top { color: #d4af37; }

    /* ÏßÄÎèÑ */
    #map { height: 30vh; }

    /* ÏÉÅÏÑ∏ */
    .detail {
      padding: 14px;
      background: #fff;
      font-size: 14px;
      line-height: 1.6;
    }

    .detail h3 {
      font-size: 17px;
      margin-bottom: 6px;
    }

    .rating { color: #ffb400; font-size: 14px; }

    .detail a { color: #0066cc; text-decoration: none; }

    /* Î¶¨Î∑∞ */
    .reviews {
      padding: 14px;
      background: #fafafa;
      border-top: 1px solid #eee;
    }

    .review {
      background: #fff;
      padding: 10px;
      border-radius: 6px;
      margin-bottom: 8px;
      font-size: 13px;
    }

    .review .user { font-weight: 600; }
    .review .star { color: #ffb400; }

    .toggle-btn {
      text-align: center;
      color: #0066cc;
      font-size: 13px;
      cursor: pointer;
      margin: 8px 0;
    }

    /* Î¶¨Î∑∞ ÏûëÏÑ± */
    .write-review {
      margin-top: 10px;
    }

    .write-review textarea {
      width: 100%;
      height: 60px;
      padding: 8px;
      font-size: 13px;
      border: 1px solid #ccc;
      border-radius: 4px;
    }

    .write-review button {
      margin-top: 6px;
      width: 100%;
      padding: 10px;
      background: #000;
      color: #fff;
      border: none;
      border-radius: 4px;
      font-size: 14px;
    }
  </style>
</head>
<body>

<header>Î∂ÄÏÇ∞ ÎßõÏßë BEST 100</header>

<!-- Î¶¨Ïä§Ìä∏ -->
<div class="list" id="list"></div>

<!-- ÏßÄÎèÑ -->
<div id="map"></div>

<!-- ÏÉÅÏÑ∏ -->
<div class="detail">
  <h3 id="dName">ÏÑ†ÌÉùÌïòÏÑ∏Ïöî <span class="rating" id="dRate"></span></h3>
  <p><strong>Ï£ºÏÜå</strong> <span id="dAddr"></span></p>
  <p><strong>Ï†ÑÌôî</strong> <a id="dTel"></a></p>
  <p><strong>Ïö¥ÏòÅÏãúÍ∞Ñ</strong> <span id="dTime"></span></p>
</div>

<!-- Î¶¨Î∑∞ -->
<div class="reviews">
  <h4>Î¶¨Î∑∞</h4>
  <div id="reviewList"></div>
  <div class="toggle-btn" id="toggleReview">Î¶¨Î∑∞ ÎçîÎ≥¥Í∏∞</div>

  <!-- Î¶¨Î∑∞ ÏûëÏÑ± -->
  <div class="write-review">
    <textarea placeholder="Î¶¨Î∑∞Î•º ÏûëÏÑ±Ìï¥Ï£ºÏÑ∏Ïöî"></textarea>
    <button>Î¶¨Î∑∞ Îì±Î°ù</button>
  </div>
</div>

<script>
  const foods = Array.from({ length: 100 }, (_, i) => ({
    rank: i + 1,
    name: `Î∂ÄÏÇ∞ ÎßõÏßë ${i + 1}`,
    rate: (Math.random() * 1 + 4).toFixed(1),
    addr: "Î∂ÄÏÇ∞Í¥ëÏó≠Ïãú",
    tel: "051-123-4567",
    time: "10:00 ~ 22:00 (ÎùºÏä§Ìä∏Ïò§Îçî 21:30)",
    lat: 35.1 + i * 0.001,
    lng: 129.03 + i * 0.001,
    reviews: [
      { user: "ÌòÑÏßÄÏù∏", star: 5, text: "ÏßÑÏßú ÎßõÏßëÏù¥ÏóêÏöî!" },
      { user: "Ïó¨ÌñâÍ∞ù", star: 4, text: "Ïõ®Ïù¥ÌåÖ ÏûàÏßÄÎßå ÎßåÏ°±!" },
      { user: "Îã®Í≥®", star: 5, text: "ÏûêÏ£º ÏòµÎãàÎã§." },
      { user: "Î∞©Î¨∏Ïûê", star: 4, text: "Îòê Ïò¨Í≤åÏöî!" }
    ]
  }));

  const listEl = document.getElementById("list");
  const reviewEl = document.getElementById("reviewList");
  const toggleBtn = document.getElementById("toggleReview");
  let map, marker, currentActive, expanded = false;

  foods.forEach(item => {
    const div = document.createElement("div");
    div.className = "item";
    div.innerHTML = `
      <div class="rank ${item.rank <= 3 ? "top" : ""}">
        ${item.rank <= 3 ? "üëë" : ""}${item.rank}
      </div>
      <div>${item.name}</div>
    `;
    div.onclick = () => selectItem(div, item);
    listEl.appendChild(div);
  });

  function selectItem(el, item) {
    if (currentActive) currentActive.classList.remove("active");
    el.classList.add("active");
    currentActive = el;

    document.getElementById("dName").innerText = item.name;
    document.getElementById("dRate").innerText = `‚≠ê ${item.rate}`;
    document.getElementById("dAddr").innerText = item.addr;
    document.getElementById("dTel").innerText = item.tel;
    document.getElementById("dTel").href = `tel:${item.tel}`;
    document.getElementById("dTime").innerText = item.time;

    renderReviews(item.reviews.slice(0, 3));
    expanded = false;
    toggleBtn.innerText = "Î¶¨Î∑∞ ÎçîÎ≥¥Í∏∞";

    const pos = new kakao.maps.LatLng(item.lat, item.lng);
    if (!map) {
      map = new kakao.maps.Map(document.getElementById("map"), { center: pos, level: 5 });
      marker = new kakao.maps.Marker({ position: pos, map });
    } else {
      map.setCenter(pos);
      marker.setPosition(pos);
    }
  }

  function renderReviews(list) {
    reviewEl.innerHTML = "";
    list.forEach(r => {
      reviewEl.innerHTML += `
        <div class="review">
          <div class="user">${r.user}</div>
          <div class="star">${"‚òÖ".repeat(r.star)}</div>
          <div>${r.text}</div>
        </div>
      `;
    });
  }

  toggleBtn.onclick = () => {
    if (!currentActive) return;
    expanded = !expanded;
    const item = foods.find(f => f.name === document.getElementById("dName").innerText);
    renderReviews(expanded ? item.reviews : item.reviews.slice(0, 3));
    toggleBtn.innerText = expanded ? "Î¶¨Î∑∞ Ï†ëÍ∏∞" : "Î¶¨Î∑∞ ÎçîÎ≥¥Í∏∞";
  };
</script>

</body>
</html>
