<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover" />
  <title>ë¶€ì‚° ë§›ì§‘ BEST 100</title>

  <!-- ì¹´ì¹´ì˜¤ë§µ SDK -->
  <script src="https://dapi.kakao.com/v2/maps/sdk.js?appkey=723a28831bc100497d089cbc3a64e24f&libraries=services"></script>

  <style>
    * { box-sizing: border-box; margin: 0; padding: 0; font-family: -apple-system, BlinkMacSystemFont, "Apple SD Gothic Neo", sans-serif; }
    body { background: #f5f5f5; }

    header {
      padding: 14px;
      background: #000;
      color: #fff;
      text-align: center;
      font-size: 18px;
      font-weight: 700;
    }

    /* ë¦¬ìŠ¤íŠ¸ */
    .list {
      max-height: 40vh;
      overflow-y: auto;
      background: #fff;
      border-bottom: 1px solid #ddd;
    }

    .item {
      display: flex;
      gap: 12px;
      padding: 14px;
      border-bottom: 1px solid #eee;
      cursor: pointer;
      align-items: center;
      transition: background 0.2s;
    }

    .item:hover {
      background: #f9f9f9;
    }

    .item.active {
      background: #fff6d5;
      border-left: 4px solid #d4af37;
    }

    .rank {
      width: 42px;
      flex-shrink: 0;
      text-align: center;
      font-weight: 800;
      font-size: 16px;
    }

    .rank.top { color: #d4af37; }

    /* ì§€ë„ */
    #map { height: 30vh; background: #e5e5e5; }

    /* ìƒì„¸ */
    .detail {
      padding: 14px;
      background: #fff;
      font-size: 14px;
      line-height: 1.6;
    }

    .detail h3 {
      font-size: 17px;
      margin-bottom: 6px;
    }

    .rating { color: #ffb400; font-size: 14px; }

    .detail a { color: #0066cc; text-decoration: none; }

    .detail p { margin: 4px 0; }

    /* ë¦¬ë·° */
    .reviews {
      padding: 14px;
      background: #fafafa;
      border-top: 1px solid #eee;
    }

    .reviews h4 {
      margin-bottom: 10px;
      font-size: 16px;
    }

    .review {
      background: #fff;
      padding: 10px;
      border-radius: 6px;
      margin-bottom: 8px;
      font-size: 13px;
    }

    .review .user { font-weight: 600; color: #333; }
    .review .star { color: #ffb400; margin: 3px 0; }

    .toggle-btn {
      text-align: center;
      color: #0066cc;
      font-size: 13px;
      cursor: pointer;
      margin: 8px 0;
      padding: 8px;
    }

    .toggle-btn:hover {
      text-decoration: underline;
    }

    /* ë¦¬ë·° ì‘ì„± */
    .write-review {
      margin-top: 10px;
    }

    .write-review textarea {
      width: 100%;
      height: 60px;
      padding: 8px;
      font-size: 13px;
      border: 1px solid #ccc;
      border-radius: 4px;
      resize: vertical;
    }

    .write-review button {
      margin-top: 6px;
      width: 100%;
      padding: 10px;
      background: #000;
      color: #fff;
      border: none;
      border-radius: 4px;
      font-size: 14px;
      cursor: pointer;
    }

    .write-review button:hover {
      background: #333;
    }

    .loading {
      padding: 20px;
      text-align: center;
      color: #666;
    }
  </style>
</head>
<body>

<header>ë¶€ì‚° ë§›ì§‘ BEST 100</header>

<!-- ë¦¬ìŠ¤íŠ¸ -->
<div class="list" id="list"></div>

<!-- ì§€ë„ -->
<div id="map"></div>

<!-- ìƒì„¸ -->
<div class="detail">
  <h3 id="dName">ë§›ì§‘ì„ ì„ íƒí•˜ì„¸ìš” <span class="rating" id="dRate"></span></h3>
  <p><strong>ì£¼ì†Œ:</strong> <span id="dAddr">-</span></p>
  <p><strong>ì „í™”:</strong> <a id="dTel" href="#">-</a></p>
  <p><strong>ìš´ì˜ì‹œê°„:</strong> <span id="dTime">-</span></p>
</div>

<!-- ë¦¬ë·° -->
<div class="reviews">
  <h4>ë¦¬ë·°</h4>
  <div id="reviewList"></div>
  <div class="toggle-btn" id="toggleReview">ë¦¬ë·° ë”ë³´ê¸°</div>

  <!-- ë¦¬ë·° ì‘ì„± -->
  <div class="write-review">
    <textarea id="reviewText" placeholder="ë¦¬ë·°ë¥¼ ì‘ì„±í•´ì£¼ì„¸ìš”"></textarea>
    <button onclick="submitReview()">ë¦¬ë·° ë“±ë¡</button>
  </div>
</div>

<script>
  // ì‹¤ì œ ë¶€ì‚° ë§›ì§‘ ë°ì´í„°
  const realFoods = [
    { name: "ì›ì¡°í• ë§¤êµ­ë°¥", addr: "ë¶€ì‚° ì¤‘êµ¬ ì¤‘êµ¬ë¡œ 36", tel: "051-245-5756", time: "08:00~21:00", lat: 35.1026, lng: 129.0320, category: "êµ­ë°¥" },
    { name: "ì†¡ì •ë–¡ë³¶ì´", addr: "ë¶€ì‚° í•´ìš´ëŒ€êµ¬ ì†¡ì •ì¤‘ì•™ë¡œ 27", tel: "051-702-2244", time: "10:00~22:00", lat: 35.1785, lng: 129.1997, category: "ë¶„ì‹" },
    { name: "ë°€ë©´ë‚™ì§€", addr: "ë¶€ì‚° ë‚¨êµ¬ ìœ ì—”í‰í™”ë¡œ 10ë²ˆê¸¸ 12", tel: "051-628-4572", time: "11:00~21:00", lat: 35.1374, lng: 129.0856, category: "ë°€ë©´" },
    { name: "ë™ë˜í• ë§¤íŒŒì „", addr: "ë¶€ì‚° ë™ë˜êµ¬ ëª…ë¥œë¡œ94ë²ˆê¸¸ 43-10", tel: "051-552-0792", time: "15:00~23:00", lat: 35.2065, lng: 129.0784, category: "íŒŒì „" },
    { name: "ë¶€ì‚°íšŸì§‘", addr: "ë¶€ì‚° ìˆ˜ì˜êµ¬ ë¯¼ë½ìˆ˜ë³€ë¡œ17", tel: "051-756-8800", time: "10:00~22:00", lat: 35.1562, lng: 129.1285, category: "íšŒ" },
    { name: "ê¸°ì¥ì†ì¹¼êµ­ìˆ˜", addr: "ë¶€ì‚° ê¸°ì¥êµ° ê¸°ì¥ì ì°¨ì„±ë¡œ 259", tel: "051-721-3977", time: "09:00~20:00", lat: 35.2447, lng: 129.2189, category: "ì¹¼êµ­ìˆ˜" },
    { name: "ê´‘ì•ˆë¦¬ë¼ì§€êµ­ë°¥", addr: "ë¶€ì‚° ìˆ˜ì˜êµ¬ ê´‘ì•ˆí•´ë³€ë¡œ 210", tel: "051-754-9988", time: "24ì‹œê°„", lat: 35.1531, lng: 129.1185, category: "êµ­ë°¥" },
    { name: "í•´ìš´ëŒ€ì•”ì†Œê°ˆë¹„", addr: "ë¶€ì‚° í•´ìš´ëŒ€êµ¬ í•´ìš´ëŒ€í•´ë³€ë¡œ 30", tel: "051-742-8585", time: "11:00~23:00", lat: 35.1587, lng: 129.1603, category: "ê°ˆë¹„" },
    { name: "ìê°ˆì¹˜ë³µêµ­", addr: "ë¶€ì‚° ì¤‘êµ¬ ìê°ˆì¹˜í•´ì•ˆë¡œ 52", tel: "051-245-1234", time: "08:00~21:00", lat: 35.0967, lng: 129.0304, category: "ë³µêµ­" },
    { name: "íƒœì¢…ëŒ€íšŸì§‘", addr: "ë¶€ì‚° ì˜ë„êµ¬ ì „ë§ë¡œ 24", tel: "051-405-7788", time: "10:00~22:00", lat: 35.0532, lng: 129.0851, category: "íšŒ" }
  ];

  const listEl = document.getElementById("list");
  const reviewEl = document.getElementById("reviewList");
  const toggleBtn = document.getElementById("toggleReview");
  let map, marker, currentActive, expanded = false;
  let foods = [];
  let geocoder;
  let currentItemIndex = -1;

  // ì´ˆê¸°í™”
  listEl.innerHTML = '<div class="loading">ë°ì´í„° ë¡œë”© ì¤‘...</div>';

  // ì¹´ì¹´ì˜¤ë§µ ì´ˆê¸°í™”
  kakao.maps.load(() => {
    geocoder = new kakao.maps.services.Geocoder();
    initializeData();
  });

  // ë°ì´í„° ì´ˆê¸°í™” (ì‹¤ì œ ë°ì´í„° + ë”ë¯¸ ë°ì´í„°)
  function initializeData() {
    foods = [];
    
    // ì‹¤ì œ ë¶€ì‚° ë§›ì§‘ 10ê°œ ì¶”ê°€
    realFoods.forEach((item, i) => {
      foods.push({
        rank: i + 1,
        name: item.name,
        rate: (Math.random() * 0.5 + 4.5).toFixed(1),
        addr: item.addr,
        tel: item.tel,
        time: item.time,
        lat: item.lat,
        lng: item.lng,
        category: item.category,
        reviews: generateReviews(item.category)
      });
    });

    // ë‚˜ë¨¸ì§€ 90ê°œëŠ” ìë™ ìƒì„±
    for (let i = 10; i < 100; i++) {
      const categories = ["êµ­ë°¥", "ë°€ë©´", "íšŒ", "ê°ˆë¹„", "íŒŒì „", "ì¹¼êµ­ìˆ˜", "ë¶„ì‹", "ë³µêµ­", "ê³±ì°½", "ì°œ"];
      const category = categories[Math.floor(Math.random() * categories.length)];
      
      foods.push({
        rank: i + 1,
        name: `ë¶€ì‚° ${category} ë§›ì§‘ ${i + 1}`,
        rate: (Math.random() * 1 + 4).toFixed(1),
        addr: `ë¶€ì‚°ê´‘ì—­ì‹œ ${getRandomDistrict()}`,
        tel: `051-${Math.floor(Math.random() * 900 + 100)}-${Math.floor(Math.random() * 9000 + 1000)}`,
        time: "11:00~21:00",
        lat: 35.1 + Math.random() * 0.15,
        lng: 129.03 + Math.random() * 0.2,
        category: category,
        reviews: generateReviews(category)
      });
    }

    renderList();
  }

  function getRandomDistrict() {
    const districts = ["í•´ìš´ëŒ€êµ¬", "ìˆ˜ì˜êµ¬", "ì¤‘êµ¬", "ë™ë˜êµ¬", "ë‚¨êµ¬", "ë¶€ì‚°ì§„êµ¬", "ì‚¬í•˜êµ¬", "ì˜ë„êµ¬"];
    return districts[Math.floor(Math.random() * districts.length)] + " " + 
           ["ì¤‘ì•™ëŒ€ë¡œ", "í•´ë³€ë¡œ", "ê´‘ì•ˆë¡œ", "ë²ˆì˜ë¡œ"][Math.floor(Math.random() * 4)] + " " + 
           Math.floor(Math.random() * 200 + 1);
  }

  function generateReviews(category) {
    const templates = {
      "êµ­ë°¥": ["ì§„í•œ ìœ¡ìˆ˜ê°€ ì¼í’ˆì´ì—ìš”!", "í•´ì¥í•˜ê¸° ë”± ì¢‹ì•„ìš”", "ë¶€ì‚° ì™€ì„œ ê¼­ ë¨¹ì–´ì•¼ í•  ë§›"],
      "ë°€ë©´": ["ì‹œì›í•˜ê³  ì«„ê¹ƒí•´ìš”", "ì—¬ë¦„ì— ìµœê³ ", "ì–‘ë„ ë§ê³  ë§›ìˆì–´ìš”"],
      "íšŒ": ["ì‹ ì„ í•œ íšŒê°€ ì •ë§ ë§›ìˆì–´ìš”", "ê´‘ì–´ê°€ ë„ˆë¬´ ì‹±ì‹±í•´ìš”", "ì‚¬ì¥ë‹˜ë„ ì¹œì ˆí•˜ì„¸ìš”"],
      "ê°ˆë¹„": ["ìœ¡ì¦™ì´ í’ë¶€í•´ìš”", "ê³ ê¸° ì§ˆì´ ì •ë§ ì¢‹ì•„ìš”", "ê°€ì¡± ëª¨ì„ìœ¼ë¡œ ì¶”ì²œ"],
      "íŒŒì „": ["ë°”ì‚­ë°”ì‚­ ìµœê³ ", "ë§‰ê±¸ë¦¬ë‘ ì°°ë–¡ê¶í•©", "ë¹„ì˜¤ëŠ” ë‚  ìƒê°ë‚˜ìš”"],
      "ì¹¼êµ­ìˆ˜": ["êµ­ë¬¼ì´ ê¹Šê³  ì§„í•´ìš”", "ë©´ë°œì´ ì«„ê¹ƒí•´ìš”", "ê¹€ì¹˜ë„ ë§›ìˆì–´ìš”"],
      "ë¶„ì‹": ["ë–¡ë³¶ì´ê°€ ì§„ì§œ ë§›ìˆì–´ìš”", "íŠ€ê¹€ë„ ë°”ì‚­ë°”ì‚­", "ê°€ì„±ë¹„ ìµœê³ "],
      "ë³µêµ­": ["ì‹œì›í•œ êµ­ë¬¼ì´ ëë‚´ì¤˜ìš”", "ë³µì´ ì‹¤í•´ìš”", "ìˆ  í•´ì¥ ì™„ë²½"],
      "ê³±ì°½": ["ëƒ„ìƒˆ ì•ˆ ë‚˜ê³  ì‹ ì„ í•´ìš”", "ì†ŒìŠ¤ê°€ ì¼í’ˆ", "ì†Œì£¼ ë¶€ë¥´ëŠ” ë§›"],
      "ì°œ": ["ì–‘ë…ì´ ì •ë§ ë§›ìˆì–´ìš”", "ì–‘ë„ í‘¸ì§í•´ìš”", "ë§¤ì½¤ë‹¬ì½¤ ìµœê³ "]
    };
    
    const comments = templates[category] || ["ë§›ìˆì–´ìš”!", "ì¶”ì²œí•©ë‹ˆë‹¤", "ì¬ë°©ë¬¸ ì˜ì‚¬ ìˆì–´ìš”"];
    
    return [
      { user: "í˜„ì§€ì¸", star: 5, text: comments[0] },
      { user: "ì—¬í–‰ê°", star: 4, text: comments[1] },
      { user: "ë‹¨ê³¨ì†ë‹˜", star: 5, text: comments[2] },
      { user: "ë§›ì§‘íƒë°©", star: 4, text: "ë˜ ì˜¬ê²Œìš”!" }
    ];
  }

  // ë¦¬ìŠ¤íŠ¸ ë Œë”ë§
  function renderList() {
    listEl.innerHTML = '';
    foods.forEach((item, index) => {
      const div = document.createElement("div");
      div.className = "item";
      div.innerHTML = `
        <div class="rank ${item.rank <= 3 ? "top" : ""}">
          ${item.rank <= 3 ? "ğŸ‘‘" : ""}${item.rank}
        </div>
        <div>
          <div style="font-weight: 600;">${item.name}</div>
          <div style="font-size: 12px; color: #666; margin-top: 2px;">${item.category || "í•œì‹"}</div>
        </div>
      `;
      div.onclick = () => selectItem(div, item, index);
      listEl.appendChild(div);
    });
  }

  function selectItem(el, item, index) {
    if (currentActive) currentActive.classList.remove("active");
    el.classList.add("active");
    currentActive = el;
    currentItemIndex = index;

    // ì„ íƒëœ í•­ëª©ìœ¼ë¡œ ìŠ¤í¬ë¡¤
    el.scrollIntoView({ behavior: 'smooth', block: 'nearest' });

    document.getElementById("dName").innerText = item.name;
    document.getElementById("dRate").innerText = `â­ ${item.rate}`;
    document.getElementById("dAddr").innerText = item.addr;
    document.getElementById("dTel").innerText = item.tel;
    document.getElementById("dTel").href = `tel:${item.tel}`;
    document.getElementById("dTime").innerText = item.time;

    renderReviews(item.reviews.slice(0, 3));
    expanded = false;
    toggleBtn.innerText = "ë¦¬ë·° ë”ë³´ê¸°";

    // ì§€ë„ í‘œì‹œ
    showMap(item.lat, item.lng);
  }

  function showMap(lat, lng) {
    const pos = new kakao.maps.LatLng(lat, lng);
    if (!map) {
      map = new kakao.maps.Map(document.getElementById("map"), { 
        center: pos, 
        level: 3 
      });
      marker = new kakao.maps.Marker({ 
        position: pos, 
        map: map 
      });
    } else {
      map.setCenter(pos);
      marker.setPosition(pos);
    }
  }

  function renderReviews(list) {
    reviewEl.innerHTML = "";
    list.forEach(r => {
      reviewEl.innerHTML += `
        <div class="review">
          <div class="user">${r.user}</div>
          <div class="star">${"â˜…".repeat(r.star)}${"â˜†".repeat(5-r.star)}</div>
          <div>${r.text}</div>
        </div>
      `;
    });
  }

  toggleBtn.onclick = () => {
    if (currentItemIndex === -1) return;
    expanded = !expanded;
    const item = foods[currentItemIndex];
    renderReviews(expanded ? item.reviews : item.reviews.slice(0, 3));
    toggleBtn.innerText = expanded ? "ë¦¬ë·° ì ‘ê¸°" : "ë¦¬ë·° ë”ë³´ê¸°";
  };

  function submitReview() {
    const textarea = document.getElementById("reviewText");
    const text = textarea.value.trim();
    
    if (!text) {
      alert("ë¦¬ë·° ë‚´ìš©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.");
      return;
    }
    
    if (currentItemIndex === -1) {
      alert("ë§›ì§‘ì„ ë¨¼ì € ì„ íƒí•´ì£¼ì„¸ìš”.");
      return;
    }
    
    // ë¦¬ë·° ì¶”ê°€
    foods[currentItemIndex].reviews.push({
      user: "ìµëª…",
      star: 5,
      text: text
    });
    
    // ë¦¬ë·° ë‹¤ì‹œ ë Œë”ë§
    renderReviews(expanded ? foods[currentItemIndex].reviews : foods[currentItemIndex].reviews.slice(0, 3));
    
    // í…ìŠ¤íŠ¸ ì˜ì—­ ì´ˆê¸°í™”
    textarea.value = "";
    
    alert("ë¦¬ë·°ê°€ ë“±ë¡ë˜ì—ˆìŠµë‹ˆë‹¤!");
  }
</script>

</body>
</html>